CC = mpiCC
CPPFLAGS = -Wall
CXXFLAGS = -std=c++11

# Path to sparsehash src
USER_LIBS = -I /home/budvin/sparsehash/sparsehash-sparsehash-2.0.4/src


main: main.o extractor.o com.o kmer_dump.o utils.hpp MurmurHash2.o
	$(CC) $(CXXFLAGS) $(CPPFLAGS) -o kmer_counter.out main.o extractor.o com.o kmer_dump.o MurmurHash2.o $(USER_LIBS)

main.o: main.cpp extractor.hpp com.hpp kmer_dump.hpp utils.hpp
	$(CC) $(CXXFLAGS) $(CPPFLAGS) -c main.cpp $(USER_LIBS)

extractor.o: extractor.cpp extractor.hpp utils.hpp
	$(CC) $(CXXFLAGS) $(CPPFLAGS) -c extractor.cpp $(USER_LIBS)

com.o: com.cpp com.hpp utils.hpp
	$(CC) $(CXXFLAGS) $(CPPFLAGS) -c com.cpp $(USER_LIBS)

kmer_dump.o: kmer_dump.cpp kmer_dump.hpp utils.hpp
	$(CC) $(CXXFLAGS) $(CPPFLAGS) -c kmer_dump.cpp $(USER_LIBS)

MurmurHash2.o: MurmurHash2.cpp MurmurHash2.hpp
	$(CC) $(CXXFLAGS) $(CPPFLAGS) -c MurmurHash2.cpp $(USER_LIBS)